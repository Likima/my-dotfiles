# Window Rules

# Fullscreen windows should be opaque
windowrule {
    name = fullscreen-opaque
    opaque = on
    match:fullscreen = 1
}

# Application workspace assignments
windowrule {
    name = vscode-workspace
    workspace = 3 silent
    match:class = ^(code)$
}

windowrule {
    name = spotify-workspace
    workspace = 4 silent
    match:class = ^(spotify)$
}

windowrule {
    name = discord-workspace
    workspace = 2 silent
    match:class = ^(discord)$
}

windowrule {
    name = steam-workspace
    workspace = 5 silent
    center = on
    match:class = ^(steam)$
}

windowrule {
    name = steam-no-focus
    stay_focused = on
    min_size = 1 1
    no_focus = on
    match:title = ^()$
    match:class = ^(steam)$
}

# Steam games - fullscreen, no blur for performance
windowrule {
    name = steam-games
    center = on
    float = on
    monitor = 0
    fullscreen = on
    immediate = on
    no_blur = on
    opaque = on
    match:class = ^(steam_app_.*)$
}

# Float utility windows
windowrule {
    name = float-pavucontrol
    float = on
    match:class = ^(pavucontrol)$
}

windowrule {
    name = float-nm-editor
    float = on
    match:class = ^(nm-connection-editor)$
}

windowrule {
    name = float-blueman
    float = on
    match:class = ^(blueman-manager)$
}

windowrule {
    name = float-calculator
    float = on
    match:class = ^(gnome-calculator)$
}

windowrule {
    name = float-calculator-gnome
    float = on
    match:class = ^(org.gnome.Calculator)$
}

windowrule {
    name = float-pip
    float = on
    pin = on
    match:title = ^(Picture-in-Picture)$
}

windowrule {
    name = float-open-file
    float = on
    match:title = ^(Open File)$
}

windowrule {
    name = float-save-file
    float = on
    match:title = ^(Save File)$
}

windowrule {
    name = float-replace-files
    float = on
    match:title = ^(Confirm to replace files)$
}

windowrule {
    name = float-file-progress
    float = on
    match:title = ^(File Operation Progress)$
}

windowrule {
    name = float-xdg-portal
    float = on
    match:class = ^(xdg-desktop-portal-gtk)$
}

windowrule {
    name = float-polkit-kde
    float = on
    match:class = ^(org.kde.polkit-kde-authentication-agent-1)$
}

windowrule {
    name = float-polkit-gnome
    float = on
    match:class = ^(polkit-gnome-authentication-agent-1)$
}

# Browser fixes
windowrule {
    name = zen-library-float
    float = on
    match:class = ^(zen-alpha)$
    match:title = ^(Library)$
}

windowrule {
    name = firefox-library-float
    float = on
    match:class = ^(firefox)$
    match:title = ^(Library)$
}

windowrule {
    name = zen-idle-inhibit
    idle_inhibit = fullscreen
    match:class = ^(zen-alpha)$
}

windowrule {
    name = firefox-idle-inhibit
    idle_inhibit = fullscreen
    match:class = ^(firefox)$
}

# Image viewer
windowrule {
    name = imv-float
    float = on
    size = 1200 800
    center = on
    match:class = ^(imv)$
}

# Suppress maximize requests
windowrule {
    name = suppress-maximize
    suppress_event = maximize
    match:class = .*
}

# Fix XWayland dragging issues
windowrule {
    name = xwayland-drag-fix
    no_focus = on
    match:class = ^$
    match:title = ^$
    match:xwayland = 1
    match:float = 1
    match:fullscreen = 0
    match:pin = 0
}

# Layer rules for blur
layerrule {
    name = blur-waybar
    blur = on
    blur_popups = on
    ignore_alpha = 0
    match:namespace = waybar
}

layerrule {
    name = blur-rofi
    blur = on
    blur_popups = on
    ignore_alpha = 0
    match:namespace = rofi
}

layerrule {
    name = blur-notifications
    blur = on
    blur_popups = on
    ignore_alpha = 0
    match:namespace = notifications
}
